<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_55) on Tue Aug 05 23:53:16 NZST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>BucketTimedMetric (avaje-metric-api 3.5.0 API)</title>
<meta name="date" content="2014-08-05">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BucketTimedMetric (avaje-metric-api 3.5.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BucketTimedMetric.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/avaje/metric/CounterMetric.html" title="interface in org.avaje.metric"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/avaje/metric/BucketTimedMetric.html" target="_top">Frames</a></li>
<li><a href="BucketTimedMetric.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.avaje.metric</div>
<h2 title="Interface BucketTimedMetric" class="title">Interface BucketTimedMetric</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">BucketTimedMetric</span>
extends <a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></pre>
<div class="block">Used to collect timed metrics but puts the statistics into millisecond time ranges (buckets).
 <p>
 In providing millisecond bucket ranges of 200, 400, 600 this will create 4 buckets to put the
 execution statistics into. The first range will be for all events that take between 0 and 200
 milliseconds, the second range will be for all events that take between 200 and 400 milliseconds,
 the third range will take events that take between 400 and 600 milliseconds and the last bucket
 takes all events that take longer than 600 milliseconds.
 <p>
 The general purpose of using a BucketTimedMetric over a TimedMetric is that it can provide an
 insight into how the execution times are statistically distributed. For example, a method
 execution might have 2 paths with one hitting a cache and generally a lot faster. In using 2 or
 more buckets you might get a more representative view of the 2 distinct execution paths and
 monitor the slow non-cached execution path more accurately.
 <p>
 <em>Example:</em>
 
 <pre>
 <code>
  
  // Declare the metric with 4 bucket ranges of:
  //    0 - 100 milliseconds
  //  100 - 200 milliseconds
  //  200 - 300 milliseconds
  //  300+      milliseconds
  
  static final BucketTimedMetric timedUserLogin = MetricManager.getBucketTimedMetric(MyService.class, "performLogin", 100, 200, 300);
  ...
  
  public void performLogin() {
    
    long startNanos = System.nanoTime();
    
    try {
      ...
    
    
    } finally {
      // Add the event to the success statistics
      timedUserLogin.addEventSince(true, startNanos);
    }
  }
  
 </code>
 </pre>
 <p>
 Instead of programmatically adding BucketTimedMetric code these can be added using enhancement.
 Classes that are annotated with <code>@Timed</code> on the class or method can have the
 appropriate code added via enhancement. Also note that the enhancement in addition can be applied
 to classes annotated with <code>@Singleton</code>, JAX-RS annotations like <code>@Path</code> and
 Spring stereotype annotations like <code>@Component</code>, <code>@Service</code> etc.
 <p>
 The enhancement will add instructions such that for method execution that throw exceptions the
 timing is put into the error statistics. This can provide quick insight into where errors are
 occurring, how frequently and execution time of errors.
 
 <p>
 <em>Example:</em> <code>@Timed</code> annotation.
 
 <pre>
 <code>
  ...
  @Timed(buckets=100,200,300)
  public void performLogin() {
    ...
  }
  
 </code>
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#addEventDuration(boolean, long)">addEventDuration</a></strong>(boolean&nbsp;success,
                long&nbsp;durationNanos)</code>
<div class="block">Add an event duration in nanoseconds noting if it was a success or failure result.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#addEventSince(boolean, long)">addEventSince</a></strong>(boolean&nbsp;success,
             long&nbsp;startNanos)</code>
<div class="block">Add an event based on a startNanos (determined by <a href="http://java.sun.com/javase/6/docs/api/java/lang/System.html?is-external=true#nanoTime()" title="class or interface in java.lang"><code>System.nanoTime()</code></a>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#getBucketRanges()">getBucketRanges</a></strong>()</code>
<div class="block">Return ranges times in milliseconds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/TimedMetric.html" title="interface in org.avaje.metric">TimedMetric</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#getBuckets()">getBuckets</a></strong>()</code>
<div class="block">Return the underlying TimedMetrics with one per bucket.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#operationEnd(int, long)">operationEnd</a></strong>(int&nbsp;opCode,
            long&nbsp;startNanos)</code>
<div class="block">Add an event duration with opCode indicating success or failure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric">TimedEvent</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/BucketTimedMetric.html#startEvent()">startEvent</a></strong>()</code>
<div class="block">Start an event.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.avaje.metric.Metric">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.avaje.metric.<a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></h3>
<code><a href="../../../org/avaje/metric/Metric.html#clearStatistics()">clearStatistics</a>, <a href="../../../org/avaje/metric/Metric.html#collectStatistics()">collectStatistics</a>, <a href="../../../org/avaje/metric/Metric.html#getName()">getName</a>, <a href="../../../org/avaje/metric/Metric.html#visit(org.avaje.metric.MetricVisitor)">visit</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBucketRanges()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBucketRanges</h4>
<pre>int[]&nbsp;getBucketRanges()</pre>
<div class="block">Return ranges times in milliseconds.
 <p>
 These values are more accurately described as the top value in milliseconds of end range except
 the last bucket which is unbounded. For example, with bucket ranges of 100,200,300 there are 4
 ranges - 0 to 100 millis, 100 to 200 millis, 200 to 300 millis and 300+.</div>
</li>
</ul>
<a name="getBuckets()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBuckets</h4>
<pre><a href="../../../org/avaje/metric/TimedMetric.html" title="interface in org.avaje.metric">TimedMetric</a>[]&nbsp;getBuckets()</pre>
<div class="block">Return the underlying TimedMetrics with one per bucket.</div>
</li>
</ul>
<a name="startEvent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startEvent</h4>
<pre><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric">TimedEvent</a>&nbsp;startEvent()</pre>
<div class="block">Start an event.
 <p>
 At the completion of the event <a href="../../../org/avaje/metric/TimedEvent.html#endWithSuccess()"><code>TimedEvent.endWithSuccess()</code></a>,
 <a href="../../../org/avaje/metric/TimedEvent.html#endWithError()"><code>TimedEvent.endWithError()</code></a> or <a href="../../../org/avaje/metric/TimedEvent.html#end(boolean)"><code>TimedEvent.end(boolean)</code></a> are called to record the
 event duration and success or otherwise.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/BucketTimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> or
 <a href="../../../org/avaje/metric/BucketTimedMetric.html#addEventDuration(boolean, long)"><code>addEventDuration(boolean, long)</code></a>. Note that this startEvent() method has slightly
 higher overhead as it instantiates a TimedEvent object which must be later GC'ed. In this sense
 generally addEventSince() is the preferred method to use.</div>
</li>
</ul>
<a name="addEventSince(boolean, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEventSince</h4>
<pre>void&nbsp;addEventSince(boolean&nbsp;success,
                 long&nbsp;startNanos)</pre>
<div class="block">Add an event based on a startNanos (determined by <a href="http://java.sun.com/javase/6/docs/api/java/lang/System.html?is-external=true#nanoTime()" title="class or interface in java.lang"><code>System.nanoTime()</code></a>).
 <p>
 Success and failure statistics are kept separately.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/BucketTimedMetric.html#startEvent()"><code>startEvent()</code></a>. Note that using startEvent() has
 slightly higher overhead as it instantiates a TimedEvent object which must be later GC'ed. In
 this sense generally addEventSince() is the preferred method to use.</div>
</li>
</ul>
<a name="addEventDuration(boolean, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEventDuration</h4>
<pre>void&nbsp;addEventDuration(boolean&nbsp;success,
                    long&nbsp;durationNanos)</pre>
<div class="block">Add an event duration in nanoseconds noting if it was a success or failure result.
 <p>
 Success and failure statistics are kept separately.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/BucketTimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> where you pass in the
 duration rather than the start nanoseconds.</div>
</li>
</ul>
<a name="operationEnd(int, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>operationEnd</h4>
<pre>void&nbsp;operationEnd(int&nbsp;opCode,
                long&nbsp;startNanos)</pre>
<div class="block">Add an event duration with opCode indicating success or failure. This is intended for use by
 enhanced code and not general use.
 <p>
 Although this looks redundant and a little ugly having this method means that for enhancement
 the added byte code is minimised. In the case where metric collection is turned off overhead is
 limited to a System.nanoTime() call and a noop method call.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BucketTimedMetric.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/avaje/metric/CounterMetric.html" title="interface in org.avaje.metric"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/avaje/metric/BucketTimedMetric.html" target="_top">Frames</a></li>
<li><a href="BucketTimedMetric.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014. All Rights Reserved.</small></p>
</body>
</html>
