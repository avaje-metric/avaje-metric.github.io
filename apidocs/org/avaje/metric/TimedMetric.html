<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_55) on Tue Aug 05 23:53:17 NZST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>TimedMetric (avaje-metric-api 3.5.0 API)</title>
<meta name="date" content="2014-08-05">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TimedMetric (avaje-metric-api 3.5.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TimedMetric.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/avaje/metric/TimedMetricGroup.html" title="interface in org.avaje.metric"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/avaje/metric/TimedMetric.html" target="_top">Frames</a></li>
<li><a href="TimedMetric.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.avaje.metric</div>
<h2 title="Interface TimedMetric" class="title">Interface TimedMetric</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">TimedMetric</span>
extends <a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></pre>
<div class="block">Collects and provides statics for a timed event.
 <p>
 Typically collects execution statistics for a method. TimedMetric has the ability to keep
 separate statistics for success and error execution. It is generally useful to know which methods
 are invoking errors and differences in execution time of errors versus successful execution.
 <p>
 <em>Example:</em> Using <a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a>.
 
 <pre>
 <code>
  
  // Declare the metric (typically as a static field)
  
  static final TimedMetric timedUserLogin = MetricManager.getTimedMetric(MyService.class, "performLogin");
  ...
  
  public void performLogin() {
    
    long startNanos = System.nanoTime();
    
    try {
      ...
    
    
    } finally {
      // Add the event to the success statistics
      timedUserLogin.addEventSince(true, startNanos);
    }
  }
  
 </code>
 </pre>
 <p>
 Instead of programmatically adding TimedMetric code these can be added using enhancement. Classes
 that are annotated with <code>@Timed</code> on the class or method can have the appropriate code
 added via enhancement. Also note that the enhancement in addition can be applied to classes
 annotated with <code>@Singleton</code>, JAX-RS annotations like <code>@Path</code> and Spring
 stereotype annotations like <code>@Component</code>, <code>@Service</code> etc.
 <p>
 The enhancement will add instructions such that for method execution that throw exceptions the
 timing is put into the error statistics. This can provide quick insight into where errors are
 occurring, how frequently and execution time of errors.
 
 <p>
 <em>Example:</em> <code>@Timed</code> annotation.
 
 <pre>
 <code>
  ...
  @Timed
  public void performLogin() {
    ...
  }
  
 </code>
 </pre>
 
 <p>
 <em>Example:</em> Alternative using TimedMetric. This will have a slight extra cost compared with
 <a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> as TimedEvent is instantiated and must be later
 garbage collected - using #<a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> avoid that extra
 object creation.
 
 <pre>
 <code>
  TimedMetric metric = MetricManager.getTimedMetric(MyService.class, "sayHello");
  ...
  
  TimedEvent timedEvent = metric.startEvent();
  try {
    ...
  
  } finally {
    // Add the event to the success statistics
    timedEvent.endWithSuccess();
  }
  
 </code>
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#addEventDuration(boolean, long)">addEventDuration</a></strong>(boolean&nbsp;success,
                long&nbsp;durationNanos)</code>
<div class="block">Add an event duration in nanoseconds noting if it was a success or failure result.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)">addEventSince</a></strong>(boolean&nbsp;success,
             long&nbsp;startNanos)</code>
<div class="block">Add an event based on a startNanos (determined by <a href="http://java.sun.com/javase/6/docs/api/java/lang/System.html?is-external=true#nanoTime()" title="class or interface in java.lang"><code>System.nanoTime()</code></a>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#getCollectedErrorStatistics()">getCollectedErrorStatistics</a></strong>()</code>
<div class="block">Return the error statistics.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#getCollectedSuccessStatistics()">getCollectedSuccessStatistics</a></strong>()</code>
<div class="block">Return the success statistics.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#getErrorStatistics(boolean)">getErrorStatistics</a></strong>(boolean&nbsp;reset)</code>
<div class="block">Return the error success statistics choosing is the underlying statistics should be reset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#getSuccessStatistics(boolean)">getSuccessStatistics</a></strong>(boolean&nbsp;reset)</code>
<div class="block">Return the current success statistics choosing is the underlying statistics should be reset.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#operationEnd(int, long)">operationEnd</a></strong>(int&nbsp;opCode,
            long&nbsp;startNanos)</code>
<div class="block">Add an event duration with opCode indicating success or failure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric">TimedEvent</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/avaje/metric/TimedMetric.html#startEvent()">startEvent</a></strong>()</code>
<div class="block">Start an event.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.avaje.metric.Metric">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.avaje.metric.<a href="../../../org/avaje/metric/Metric.html" title="interface in org.avaje.metric">Metric</a></h3>
<code><a href="../../../org/avaje/metric/Metric.html#clearStatistics()">clearStatistics</a>, <a href="../../../org/avaje/metric/Metric.html#collectStatistics()">collectStatistics</a>, <a href="../../../org/avaje/metric/Metric.html#getName()">getName</a>, <a href="../../../org/avaje/metric/Metric.html#visit(org.avaje.metric.MetricVisitor)">visit</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCollectedSuccessStatistics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCollectedSuccessStatistics</h4>
<pre><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a>&nbsp;getCollectedSuccessStatistics()</pre>
<div class="block">Return the success statistics.</div>
</li>
</ul>
<a name="getCollectedErrorStatistics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCollectedErrorStatistics</h4>
<pre><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a>&nbsp;getCollectedErrorStatistics()</pre>
<div class="block">Return the error statistics.</div>
</li>
</ul>
<a name="getSuccessStatistics(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSuccessStatistics</h4>
<pre><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a>&nbsp;getSuccessStatistics(boolean&nbsp;reset)</pre>
<div class="block">Return the current success statistics choosing is the underlying statistics should be reset.</div>
</li>
</ul>
<a name="getErrorStatistics(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getErrorStatistics</h4>
<pre><a href="../../../org/avaje/metric/ValueStatistics.html" title="interface in org.avaje.metric">ValueStatistics</a>&nbsp;getErrorStatistics(boolean&nbsp;reset)</pre>
<div class="block">Return the error success statistics choosing is the underlying statistics should be reset.</div>
</li>
</ul>
<a name="startEvent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startEvent</h4>
<pre><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric">TimedEvent</a>&nbsp;startEvent()</pre>
<div class="block">Start an event.
 <p>
 At the completion of the event one of <a href="../../../org/avaje/metric/TimedEvent.html#endWithSuccess()"><code>TimedEvent.endWithSuccess()</code></a>,
 <a href="../../../org/avaje/metric/TimedEvent.html#endWithError()"><code>TimedEvent.endWithError()</code></a> or <a href="../../../org/avaje/metric/TimedEvent.html#end(boolean)"><code>TimedEvent.end(boolean)</code></a> is called to record the
 event duration and success or otherwise.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> or
 <a href="../../../org/avaje/metric/TimedMetric.html#addEventDuration(boolean, long)"><code>addEventDuration(boolean, long)</code></a>. Note that this startEvent() method has slightly
 higher overhead as it instantiates a TimedEvent object which must be later GC'ed. In this sense
 generally addEventSince() is the preferred method to use.</div>
</li>
</ul>
<a name="addEventSince(boolean, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEventSince</h4>
<pre>void&nbsp;addEventSince(boolean&nbsp;success,
                 long&nbsp;startNanos)</pre>
<div class="block">Add an event based on a startNanos (determined by <a href="http://java.sun.com/javase/6/docs/api/java/lang/System.html?is-external=true#nanoTime()" title="class or interface in java.lang"><code>System.nanoTime()</code></a>).
 <p>
 Success and failure statistics are kept separately.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/TimedMetric.html#startEvent()"><code>startEvent()</code></a>. Note that using startEvent() has
 slightly higher overhead as it instantiates a TimedEvent object which must be later GC'ed. In
 this sense generally addEventSince() is the preferred method to use.</div>
</li>
</ul>
<a name="addEventDuration(boolean, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEventDuration</h4>
<pre>void&nbsp;addEventDuration(boolean&nbsp;success,
                    long&nbsp;durationNanos)</pre>
<div class="block">Add an event duration in nanoseconds noting if it was a success or failure result.
 <p>
 Success and failure statistics are kept separately.
 <p>
 This is an alternative to using <a href="../../../org/avaje/metric/TimedMetric.html#addEventSince(boolean, long)"><code>addEventSince(boolean, long)</code></a> where you pass in the
 duration rather than the start nanoseconds.</div>
</li>
</ul>
<a name="operationEnd(int, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>operationEnd</h4>
<pre>void&nbsp;operationEnd(int&nbsp;opCode,
                long&nbsp;startNanos)</pre>
<div class="block">Add an event duration with opCode indicating success or failure. This is intended for use by
 enhanced code and not general use.
 <p>
 Although this looks redundant and a little ugly having this method means that for enhancement
 the added byte code is minimised. In the case where metric collection is turned off overhead is
 limited to a System.nanoTime() call and a noop method call.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TimedMetric.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/avaje/metric/TimedEvent.html" title="interface in org.avaje.metric"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/avaje/metric/TimedMetricGroup.html" title="interface in org.avaje.metric"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/avaje/metric/TimedMetric.html" target="_top">Frames</a></li>
<li><a href="TimedMetric.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014. All Rights Reserved.</small></p>
</body>
</html>
